<!DOCTYPE html>
<html lang="en">

<head>
    <title>Data Pendaftar | Program Menulis Buku Ajar</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" type="text/css" href="/assets/css/adminx.css" media="screen" />
</head>

<body>
    <div class="adminx-container">
        <!-- Header -->
        <nav class="navbar navbar-expand justify-content-between fixed-top">
            <a class="navbar-brand mb-0 h1 d-none d-md-block" href="/dashboard.html">
                <img src="/assets/img/logo.png" class="navbar-brand-image d-inline-block align-top mr-2" alt="">
            </a>

            <form class="form-inline form-quicksearch d-none d-md-block mx-auto">
                <div class="input-group">
                    <div class="input-group-prepend">
                        <div class="input-group-icon">
                        </div>
                    </div>
                </div>
            </form>

            <div class="d-flex flex-1 d-block d-md-none">
                <a href="#" class="sidebar-toggle ml-3">
                    <i data-feather="menu"></i>
                </a>
            </div>

            <ul class="navbar-nav d-flex justify-content-end mr-2">
                <!-- Notificatoins -->
                <li class="nav-item dropdown d-flex align-items-center mr-2">
                    <div class="dropdown-menu dropdown-menu-right dropdown-menu-notifications"
                        aria-labelledby="dropdownNotifications">
                        <div class="notifications-header d-flex justify-content-between align-items-center">
                            <span class="notifications-header-title">
                                Notifications
                            </span>
                            <a href="#" class="d-flex"><small>Mark all as read</small></a>
                        </div>

                        <div class="list-group">
                            <a href="#" class="list-group-item list-group-item-action unread">
                                <p class="mb-1">Invitation for <strong>Lunch</strong> on <strong>Jan 12th 2018</strong>
                                    by
                                    <strong>Laura</strong>
                                </p>

                                <div class="mb-1">
                                    <button type="button" class="btn btn-primary btn-sm">Accept invite</button>
                                    <button type="button" class="btn btn-outline-danger btn-sm">Decline</button>
                                </div>

                                <small>1 hour ago</small>
                            </a>

                            <a href="#" class="list-group-item list-group-item-action">
                                <p class="mb-1"><strong class="text-success">Goal completed</strong><br />1,000 new
                                    members today</p>
                                <small>3 days ago</small>
                            </a>

                            <a href="#" class="list-group-item list-group-item-action">
                                <p class="mb-1 text-danger"><strong>System error detected</strong></p>
                                <small>3 days ago</small>
                            </a>

                            <a href="#" class="list-group-item list-group-item-action">
                                <p class="mb-1">Your task <strong>Design Draft</strong> is due today.</p>
                                <small>4 days ago</small>
                            </a>
                        </div>

                        <div class="notifications-footer text-center">
                            <a href="#"><small>View all notifications</small></a>
                        </div>
                    </div>
                </li>
                <!-- Notifications -->
                <li class="nav-item dropdown">
                    <a class="nav-link avatar-with-name" id="navbarDropdownMenuLink" data-toggle="dropdown" href="#">
                        <img src="https://s3.amazonaws.com/uifaces/faces/twitter/jsa/128.jpg"
                            class="d-inline-block align-top" alt="">
                    </a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                        <a class="dropdown-item" href="#">My Profile</a>
                        <a class="dropdown-item" href="#">My Tasks</a>
                        <a class="dropdown-item" href="#">Settings</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item text-danger" href="#">Sign out</a>
                    </div>
                </li>
            </ul>
        </nav>

        <!-- expand-hover push -->
        <!-- Sidebar -->
        <div class="adminx-sidebar expand-hover push">
            <ul class="sidebar-nav">
                <li class="sidebar-nav-item">
                    <a href="/dashboard.html" class="sidebar-nav-link active">
                        <span class="sidebar-nav-icon">
                            <i data-feather="home"></i>
                        </span>
                        <span class="sidebar-nav-name">
                            Home
                        </span>
                        <span class="sidebar-nav-end">

                        </span>
                    </a>
                </li>

                <li class="sidebar-nav-item">
                    <a href="/event.html" class="sidebar-nav-link">
                        <span class="sidebar-nav-icon">
                            <i data-feather="layout"></i>
                        </span>
                        <span class="sidebar-nav-name">
                            Event
                        </span>
                        <span class="sidebar-nav-end">
                            <span class="badge badge-info"></span>
                        </span>
                    </a>
                </li>

                <ul class="sidebar-sub-nav collapse" id="example">
                    <li class="sidebar-nav-item">
                        <a href="./layouts/charts_chartjs.html" class="sidebar-nav-link">
                            <span class="sidebar-nav-abbr">
                                Ch
                            </span>
                            <span class="sidebar-nav-name">
                                ChartJS
                            </span>
                        </a>
                    </li>

                    <li class="sidebar-nav-item">
                        <a href="./layouts/charts_morris.html" class="sidebar-nav-link">
                            <span class="sidebar-nav-abbr">
                                Mo
                            </span>
                            <span class="sidebar-nav-name">
                                Morris
                            </span>
                        </a>
                    </li>
                </ul>
                </li>

                <li class="sidebar-nav-item">
                    <a class="sidebar-nav-link collapsed" data-toggle="collapse" href="#navTables" aria-expanded="false"
                        aria-controls="navTables">
                        <span class="sidebar-nav-icon">
                            <i data-feather="align-justify"></i>
                        </span>
                        <span class="sidebar-nav-name">
                            Tables
                        </span>
                        <span class="sidebar-nav-end">
                            <i data-feather="chevron-right" class="nav-collapse-icon"></i>
                        </span>
                    </a>

                    <ul class="sidebar-sub-nav collapse" id="navTables">
                        <li class="sidebar-nav-item">
                            <a href="/tabel/pbukuajar.html" class="sidebar-nav-link">
                                <!-- <span class="sidebar-nav-abbr">
                  Re
                </span> -->
                                <span class="sidebar-nav-name">
                                    Pendaftar Menulis Buku Ajar
                                </span>
                            </a>
                        </li>

                        <li class="sidebar-nav-item">
                            <a href="/tabel/pbukuchapter.html" class="sidebar-nav-link">
                                <!-- <span class="sidebar-nav-abbr">
                  Da
                </span> -->
                                <span class="sidebar-nav-name">
                                    Pendaftar Menulis Buku Chapter
                                </span>
                            </a>
                        </li>
                        <li class="sidebar-nav-item">
                            <a href="/tabel/pbukureferensi.html" class="sidebar-nav-link">
                                <!-- <span class="sidebar-nav-abbr">
                  Da
                </span> -->
                                <span class="sidebar-nav-name">
                                    Pendaftar Menulis Referensi
                                </span>
                            </a>
                        </li>
                        <li class="sidebar-nav-item">
                            <a href="/tabel/pbukumonograf.html" class="sidebar-nav-link">
                                <!-- <span class="sidebar-nav-abbr">
                  Da
                </span> -->
                                <span class="sidebar-nav-name">
                                    Pendaftar Menulis Monograf
                                </span>
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="sidebar-nav-item">
                    <a class="sidebar-nav-link collapsed" data-toggle="collapse" href="#navForms" aria-expanded="false"
                        aria-controls="navForms">
                        <span class="sidebar-nav-icon">
                            <i data-feather="edit"></i>
                        </span>
                        <span class="sidebar-nav-name">
                            Event
                        </span>
                        <span class="sidebar-nav-end">
                            <i data-feather="chevron-right" class="nav-collapse-icon"></i>
                        </span>
                    </a>

                    <ul class="sidebar-sub-nav collapse" id="navForms">
                        <li class="sidebar-nav-item">
                            <a href="./layouts/form_elements.html" class="sidebar-nav-link">
                                <span class="sidebar-nav-abbr">
                                    El
                                </span>
                                <span class="sidebar-nav-name">
                                    Elements
                                </span>
                            </a>
                        </li>

                        <li class="sidebar-nav-item">
                            <a href="./layouts/form_advanced.html" class="sidebar-nav-link">
                                <span class="sidebar-nav-abbr">
                                    Ad
                                </span>
                                <span class="sidebar-nav-name">
                                    Advanced Elements
                                </span>
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="sidebar-nav-item">
                    <a class="sidebar-nav-link collapsed" data-toggle="collapse" href="#navUI" aria-expanded="false"
                        aria-controls="navUI">
                        <span class="sidebar-nav-icon">
                            <i data-feather="grid"></i>
                        </span>
                        <span class="sidebar-nav-name">
                            UI Elements
                        </span>
                        <span class="sidebar-nav-end">
                            <i data-feather="chevron-right" class="nav-collapse-icon"></i>
                        </span>
                    </a>

                    <ul class="sidebar-sub-nav collapse" id="navUI">
                        <li class="sidebar-nav-item">
                            <a href="./layouts/icons.html" class="sidebar-nav-link">
                                <span class="sidebar-nav-abbr">
                                    Ic
                                </span>
                                <span class="sidebar-nav-name">
                                    Icons
                                </span>
                            </a>
                        </li>

                        <li class="sidebar-nav-item">
                            <a href="./layouts/buttons.html" class="sidebar-nav-link">
                                <span class="sidebar-nav-abbr">
                                    Bu
                                </span>
                                <span class="sidebar-nav-name">
                                    Buttons
                                </span>
                            </a>
                        </li>

                        <li class="sidebar-nav-item">
                            <a href="./layouts/notifications.html" class="sidebar-nav-link">
                                <span class="sidebar-nav-abbr">
                                    No
                                </span>
                                <span class="sidebar-nav-name">
                                    Notifications
                                </span>
                            </a>
                        </li>

                        <li class="sidebar-nav-item">
                            <a href="./layouts/progress.html" class="sidebar-nav-link">
                                <span class="sidebar-nav-abbr">
                                    Pr
                                </span>
                                <span class="sidebar-nav-name">
                                    Progress Bars
                                </span>
                            </a>
                        </li>

                        <li class="sidebar-nav-item">
                            <a href="./layouts/tabs.html" class="sidebar-nav-link">
                                <span class="sidebar-nav-abbr">
                                    Ta
                                </span>
                                <span class="sidebar-nav-name">
                                    Tabs
                                </span>
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="sidebar-nav-item">
                    <a class="sidebar-nav-link collapsed" data-toggle="collapse" href="#navExtra" aria-expanded="false"
                        aria-controls="navExtra">
                        <span class="sidebar-nav-icon">
                            <i data-feather="layers"></i>
                        </span>
                        <span class="sidebar-nav-name">
                            Other Layouts
                        </span>
                        <span class="sidebar-nav-end">
                            <i data-feather="chevron-right" class="nav-collapse-icon"></i>
                        </span>
                    </a>

                    <ul class="sidebar-sub-nav collapse" id="navExtra">
                        <li class="sidebar-nav-item">
                            <a href="./layouts/login.html" class="sidebar-nav-link">
                                <span class="sidebar-nav-abbr">
                                    Lo
                                </span>
                                <span class="sidebar-nav-name">
                                    Login
                                </span>
                            </a>
                        </li>

                        <li class="sidebar-nav-item">
                            <a href="./layouts/signup.html" class="sidebar-nav-link">
                                <span class="sidebar-nav-abbr">
                                    Si
                                </span>
                                <span class="sidebar-nav-name">
                                    Sign Up
                                </span>
                            </a>
                        </li>

                        <li class="sidebar-nav-item">
                            <a href="./layouts/404.html" class="sidebar-nav-link">
                                <span class="sidebar-nav-abbr">
                                    Nf
                                </span>
                                <span class="sidebar-nav-name">
                                    404 Error
                                </span>
                            </a>
                        </li>

                        <li class="sidebar-nav-item">
                            <a href="./layouts/500.html" class="sidebar-nav-link">
                                <span class="sidebar-nav-abbr">
                                    Is
                                </span>
                                <span class="sidebar-nav-name">
                                    500 Error
                                </span>
                            </a>
                        </li>

                        <li class="sidebar-nav-item">
                            <a href="./layouts/timeline.html" class="sidebar-nav-link">
                                <span class="sidebar-nav-abbr">
                                    Ti
                                </span>
                                <span class="sidebar-nav-name">
                                    Timeline
                                </span>
                            </a>
                        </li>

                        <li class="sidebar-nav-item">
                            <a href="./layouts/invoice.html" class="sidebar-nav-link">
                                <span class="sidebar-nav-abbr">
                                    In
                                </span>
                                <span class="sidebar-nav-name">
                                    Invoice
                                </span>
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div><!-- Sidebar End -->
        <!-- expand-hover push -->


        <!-- Main Content -->
        <div class="adminx-content">
            <div class="adminx-main-content">
                <div class="container-fluid">
                    <!-- BreadCrumb -->
                    <nav aria-label="breadcrumb" role="navigation">
                        <ol class="breadcrumb adminx-page-breadcrumb">
                            <li class="breadcrumb-item"><a href="#">Home</a></li>
                            <li class="breadcrumb-item"><a href="#">Tabel</a></li>
                            <li class="breadcrumb-item active  aria-current=" page">Pendaftar Menulis Buku Ajar</li>
                        </ol>
                    </nav>

                    <div class="pb-3">
                        <h1>Data Tabel Pendaftar Program Menulis Buku Ajar</h1>
                    </div>

                    <div class="row">
                        <!-- <div class="col">
                            <div class="alert alert-warning" role="alert">
                                <strong>DataTables are a jQuery-only plugin</strong><br />
                                If you know a similar vanilla JS library that you want to see supported, feel free to
                                open an issue on GitHub.
                            </div>
                        </div> -->
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="card mb-grid">
                                <div class="table-responsive-md">
                                    <table class="table table-actions table-striped table-hover mb-0" data-table>
                                        <thead>
                                            <tr>
                                                <th scope="col">No</th>
                                                <th scope="col">Nama</th>
                                                <th scope="col">Email</th>
                                                <th scope="col">Alamat</th>
                                                <th scope="col">Judul Buku</th>
                                                <th scope="col">Bukti Pembayaran</th>
                                                <th scope="col">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!--  -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- // Main Content -->
    </div>

    <!-- If you prefer jQuery these are the required scripts -->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"></script>
    <script src="../dist/js/vendor.js"></script>
    <script src="../dist/js/adminx.js"></script>

    <!-- If you prefer vanilla JS these are the only required scripts -->
    <!-- script src="./dist/js/vendor.js"></script>
    <script src="./dist/js/adminx.vanilla.js"></script-->
    <!-- Tambahkan Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.5/dist/umd/supabase.min.js"></script>

    <script>
        const client = supabase.createClient(
            "https://hjbbtopfawoknagnjned.supabase.co",
            "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhqYmJ0b3BmYXdva25hZ25qbmVkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxNzk1NzEsImV4cCI6MjA3MTc1NTU3MX0.NXtNptDjskTguSKMtLVU5p-BXJtERsjqtAL2yf2Mtfg"
        );

        async function loadData() {
            const { data, error } = await client
                .from("pendaftarbukuajar")
                .select("*")
                .order("id", { ascending: true });

            if (error) {
                console.error("Gagal mengambil data:", error.message);
                return;
            }

            const tbody = document.querySelector("table tbody");
            tbody.innerHTML = ""; // kosongkan isi dulu

            data.forEach((row, index) => {
                const tr = document.createElement("tr");

                tr.innerHTML = `
        <td>${index + 1}</td>
        <td>${row.nama}</td>
        <td>
          <strong>${row.email}
        </td>
        <td>${row.alamat}</td>
        <td>${row.judul_buku}</td>
        <td>
            ${row.buktiPembayaran
                        ? row.buktiPembayaran.match(/\.(jpg|jpeg|png)$/i)
                            ? `
        <a href="${row.buktiPembayaran}" target="_blank">
          <img src="${row.buktiPembayaran}" 
               alt="Preview" 
               style="max-width:80px; max-height:80px; border-radius:4px; cursor:pointer;"/>
        </a>
      `
                            : row.buktiPembayaran.match(/\.pdf$/i)
                                ? `
          <a href="${row.buktiPembayaran}" target="_blank">
            <iframe src="${row.buktiPembayaran}" 
                    width="150" height="100" 
                    style="border:1px solid #ddd; border-radius:4px;"></iframe>
          </a>
        `
                                : `
          <a href="${row.buktiPembayaran}" 
             target="_blank" 
             class="btn btn-sm btn-primary">
             Lihat File
          </a>
        `
                        : `<span class="badge bg-secondary">Tidak ada</span>`
                    }
</td>
        <td>
          <button class="btn btn-sm btn-danger">Hapus</button>
        </td>
      `;

                tbody.appendChild(tr);
            });
        }

        document.addEventListener("DOMContentLoaded", loadData);
    </script>

    <script>
        fetch('../partials/navbar.html')
            .then(res => res.text())
            .then(html => {
                document.getElementById('navbar-container').innerHTML = html;
                if (window.feather) feather.replace();
            });

        fetch('../partials/sidebar.html')
            .then(res => res.text())
            .then(html => {
                document.getElementById('sidebar-container').innerHTML = html;
                if (window.feather) feather.replace();
            });


    </script>
    <script src="https://unpkg.com/feather-icons"></script>
</body>

</html>